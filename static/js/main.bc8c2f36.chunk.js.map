{"version":3,"sources":["SicBo/SicBoInfoDrawer.js","SicBo/SicBoRecords.js","SicBo/SicBo.js","App.js","serviceWorker.js","index.js"],"names":["SicBoInfoDrawer","react_default","a","createElement","drawer","width","closable","onClose","this","props","handleCloseInfo","visible","info_visible","divider","table","columns","title","dataIndex","key","dataSource","bet_flag","bet_key","bet_explain","pagination","style","backgroundColor","Component","network","blockchain","protocol","host","port","chainId","contract_account","Date","prototype","Format","fmt","o","M+","getMonth","d+","getDate","h+","getHours","m+","getMinutes","s+","getSeconds","q+","Math","floor","S","getMilliseconds","k","test","replace","RegExp","$1","getFullYear","substr","length","SicBoRecords","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","fetchRecord","eosjs","getActions","then","_ref","actions","limit","_data_reveals","i","action_trace","act","account","name","data","res","receipt","receiver","push","player","time","txtime","payin","payout","payed","dices","dice","dice1","dice2","dice3","detail","setState","data_reveals","setTimeout","catch","err","console","error","componentDidMount","Eos","httpEndpoint","concat","state","bind","assertThisInitialized","loading","align","margin","Header","Content","Search","input","SicBo","init","document","addEventListener","scatterExtension","scatter","window","identity","accounts","find","player_account","is_login","getPlayerAsset","playerLoginLogout","forgetIdentity","player_asset","eos","getIdentity","message","info","Promise","all","getTableRows","json","code","scope","_ref2","slicedToArray","eosBalance","tbtBalance","rows","_player_asset","balance","tbt","e","getReferrer","reg","ref","location","search","match","referrer","unescape","inputQuantityChange","value","isNaN","log","bet_quantity","inputMemoChange","event","preventDefault","uuid4","UUID","create","toString","transfer","from","to","quantity","Number","toFixed","memo","success","getSicBoResult","dice_shaking","setInterval","dice_result","random","action_seq","arguments","undefined","pow","_ref3","cur_action_seq","index","account_action_seq","uid","clearInterval","result","alert","showInfo","closeInfo","layout","className","href","onClick","icon","type","input_number","placeholder","step","onChange","onSearch","enterButton","fontSize","SicBo_SicBoRecords","SicBo_SicBoInfoDrawer","App","src_SicBo_SicBo","Boolean","hostname","ReactDOM","render","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.bc8c2f36.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Drawer, Table, Divider } from 'antd';\n\nclass SicBoInfoDrawer extends Component {\n    render() {\n\n        const info_columns = [{\n            title: \"押注标识符\",\n            dataIndex: \"bet_flag\",\n            key: \"bet_flag\",\n            // align: \"center\",\n            width: \"25%\",\n        }, {\n            title: \"押注标识(key)\",\n            dataIndex: \"bet_key\",\n            key: \"bet_key\",\n            // align: \"center\",\n            width: \"25%\",\n        }, {\n            title: \"说明\",\n            dataIndex: \"bet_explain\",\n            key: \"bet_explain\",\n            // align: \"center\",\n            width: \"50%\",\n        }];\n\n        const info_data = [{\n            key: \"1\",  bet_flag: \"odd\",         bet_key: \"0\",      bet_explain: \"单\",\n        }, {\n            key: \"2\",  bet_flag: \"even\",        bet_key: \"1\",      bet_explain: \"双\",\n        }, {\n            key: \"3\",  bet_flag: \"big\",         bet_key: \"2\",      bet_explain: \"大\",\n        }, {\n            key: \"4\",  bet_flag: \"small\",       bet_key: \"3\",      bet_explain: \"小\",\n        }, {\n            key: \"5\",  bet_flag: \"dice_110\",    bet_key: \"110\",    bet_explain: \"对子-1（三个骰子点数出现两个1）\",\n        }, {\n            key: \"6\",  bet_flag: \"dice_220\",    bet_key: \"220\",    bet_explain: \"对子-2（三个骰子点数出现两个2）\",\n        }, {\n            key: \"7\",  bet_flag: \"dice_330\",    bet_key: \"330\",    bet_explain: \"对子-3（三个骰子点数出现两个3）\",\n        }, {\n            key: \"8\",  bet_flag: \"dice_440\",    bet_key: \"440\",    bet_explain: \"对子-4（三个骰子点数出现两个4）\",\n        }, {\n            key: \"9\",  bet_flag: \"dice_550\",    bet_key: \"550\",    bet_explain: \"对子-5（三个骰子点数出现两个5）\",\n        }, {\n            key: \"10\", bet_flag: \"dice_660\",    bet_key: \"660\",    bet_explain: \"对子-6（三个骰子点数出现两个6）\",\n        }, {\n            key: \"11\", bet_flag: \"dice_111\",    bet_key: \"111\",    bet_explain: \"围骰-1（三个骰子点数都是1）\",\n        }, {\n            key: \"12\", bet_flag: \"dice_222\",    bet_key: \"222\",    bet_explain: \"围骰-2（三个骰子点数都是2）\",\n        }, {\n            key: \"13\", bet_flag: \"dice_333\",    bet_key: \"333\",    bet_explain: \"围骰-3（三个骰子点数都是3）\",\n        }, {\n            key: \"14\", bet_flag: \"dice_444\",    bet_key: \"444\",    bet_explain: \"围骰-4（三个骰子点数都是4）\",\n        }, {\n            key: \"15\", bet_flag: \"dice_555\",    bet_key: \"555\",    bet_explain: \"围骰-5（三个骰子点数都是5）\",\n        }, {\n            key: \"16\", bet_flag: \"dice_666\",    bet_key: \"666\",    bet_explain: \"围骰-6（三个骰子点数都是6）\",\n        }, {\n            key: \"17\", bet_flag: \"dice_123456\", bet_key: \"123456\", bet_explain: \"全围（三个骰子点数相同）\",\n        }, {\n            key: \"18\", bet_flag: \"dice_4\",      bet_key: \"4\",      bet_explain: \"点数和-4\",\n        }, {\n            key: \"19\", bet_flag: \"dice_5\",      bet_key: \"5\",      bet_explain: \"点数和-5\",\n        }, {\n            key: \"20\", bet_flag: \"dice_6\",      bet_key: \"6\",      bet_explain: \"点数和-6\",\n        }, {\n            key: \"21\", bet_flag: \"dice_7\",      bet_key: \"7\",      bet_explain: \"点数和-7\",\n        }, {\n            key: \"22\", bet_flag: \"dice_8\",      bet_key: \"8\",      bet_explain: \"点数和-8\",\n        }, {\n            key: \"23\", bet_flag: \"dice_9\",      bet_key: \"9\",      bet_explain: \"点数和-9\",\n        }, {\n            key: \"24\", bet_flag: \"dice_10\",     bet_key: \"10\",     bet_explain: \"点数和-10\",\n        }, {\n            key: \"25\", bet_flag: \"dice_11\",     bet_key: \"11\",     bet_explain: \"点数和-11\",\n        }, {\n            key: \"26\", bet_flag: \"dice_12\",     bet_key: \"12\",     bet_explain: \"点数和-12\",\n        }, {\n            key: \"27\", bet_flag: \"dice_13\",     bet_key: \"13\",     bet_explain: \"点数和-13\",\n        }, {\n            key: \"28\", bet_flag: \"dice_14\",     bet_key: \"14\",     bet_explain: \"点数和-14\",\n        }, {\n            key: \"29\", bet_flag: \"dice_15\",     bet_key: \"15\",     bet_explain: \"点数和-15\",\n        }, {\n            key: \"30\", bet_flag: \"dice_16\",     bet_key: \"16\",     bet_explain: \"点数和-16\",\n        }, {\n            key: \"31\", bet_flag: \"dice_17\",     bet_key: \"17\",     bet_explain: \"点数和-17\",\n        }, {\n            key: \"32\", bet_flag: \"dice_102\",    bet_key: \"102\",    bet_explain: \"三个骰子出现1、2点\",\n        }, {\n            key: \"33\", bet_flag: \"dice_103\",    bet_key: \"103\",    bet_explain: \"三个骰子出现1、3点\",\n        }, {\n            key: \"34\", bet_flag: \"dice_104\",    bet_key: \"104\",    bet_explain: \"三个骰子出现1、4点\",\n        }, {\n            key: \"35\", bet_flag: \"dice_105\",    bet_key: \"105\",    bet_explain: \"三个骰子出现1、5点\",\n        }, {\n            key: \"36\", bet_flag: \"dice_106\",    bet_key: \"106\",    bet_explain: \"三个骰子出现1、6点\",\n        }, {\n            key: \"37\", bet_flag: \"dice_203\",    bet_key: \"203\",    bet_explain: \"三个骰子出现2、3点\",\n        }, {\n            key: \"38\", bet_flag: \"dice_204\",    bet_key: \"204\",    bet_explain: \"三个骰子出现2、4点\",\n        }, {\n            key: \"39\", bet_flag: \"dice_205\",    bet_key: \"205\",    bet_explain: \"三个骰子出现2、5点\",\n        }, {\n            key: \"40\", bet_flag: \"dice_206\",    bet_key: \"206\",    bet_explain: \"三个骰子出现2、6点\",\n        }, {\n            key: \"41\", bet_flag: \"dice_304\",    bet_key: \"304\",    bet_explain: \"三个骰子出现3、4点\",\n        }, {\n            key: \"42\", bet_flag: \"dice_305\",    bet_key: \"305\",    bet_explain: \"三个骰子出现3、5点\",\n        }, {\n            key: \"43\", bet_flag: \"dice_306\",    bet_key: \"306\",    bet_explain: \"三个骰子出现3、6点\",\n        }, {\n            key: \"44\", bet_flag: \"dice_405\",    bet_key: \"405\",    bet_explain: \"三个骰子出现4、5点\",\n        }, {\n            key: \"45\", bet_flag: \"dice_406\",    bet_key: \"406\",    bet_explain: \"三个骰子出现4、6点\",\n        }, {\n            key: \"46\", bet_flag: \"dice_506\",    bet_key: \"506\",    bet_explain: \"三个骰子出现5、7点\",\n        }, {\n            key: \"47\", bet_flag: \"dice_100\",    bet_key: \"100\",    bet_explain: \"三个骰子出现1点\",\n        }, {\n            key: \"48\", bet_flag: \"dice_200\",    bet_key: \"200\",    bet_explain: \"三个骰子出现2点\",\n        }, {\n            key: \"49\", bet_flag: \"dice_300\",    bet_key: \"300\",    bet_explain: \"三个骰子出现3点\",\n        }, {\n            key: \"50\", bet_flag: \"dice_400\",    bet_key: \"400\",    bet_explain: \"三个骰子出现4点\",\n        }, {\n            key: \"51\", bet_flag: \"dice_500\",    bet_key: \"500\",    bet_explain: \"三个骰子出现5点\",\n        }, {\n            key: \"52\", bet_flag: \"dice_600\",    bet_key: \"600\",    bet_explain: \"三个骰子出现6点\",\n        }];\n\n        return (\n            <div>\n                <Drawer\n                    // title = \"SicBo Info\"\n                    width = \"50%\"\n                    closable = {false}\n                    onClose = {this.props.handleCloseInfo}\n                    visible = {this.props.info_visible}\n                >\n                    <Divider>一、押注说明</Divider>\n                    <Table\n                        columns = {info_columns}\n                        dataSource = {info_data}\n                        pagination = {false}\n                        style={{ backgroundColor: \"#efefef\" }}\n                    />\n                    <Divider>二、 memo格式</Divider>\n                    <p>r:推荐人账号;u:uuid;押注标识:押注金额</p>\n                    <p>(\"推荐人账号\"和\"押注标识\"之间的是英文分号，\"押注标识\"和\"押注金额\"之间的是英文冒号)</p>\n                    <p>----------------------------------------------------------------------------------------------</p>\n                    <p>例子1、押大，金额为2.5000 EOS，推荐人账号是aaaabbbb2222，uuid为3315f8ee-c212-41b0-9e8e-ce3ca00f024e：</p>\n                    <p>r:aaaabbbb2222;u:3315f8ee-c212-41b0-9e8e-ce3ca00f024e;2:250000</p>\n                    <p>----------------------------------------------------------------------------------------------</p>\n                    <p>例子2、押0.6000 EOS全围，以及押2.0000 EOS 双，无推荐人，uuid为3315f8ee-c212-41b0-9e8e-ce3ca00f024e：</p>\n                    <p>u:3315f8ee-c212-41b0-9e8e-ce3ca00f024e;123456:6000;1:20000</p>\n                    <p>----------------------------------------------------------------------------------------------</p>\n                    <p>注：</p>\n                    <p>a. uuid是必须的，长度为36的字符串，可以通过使用\"uuid-js\"库</p>\n                    <p>b. uuid-js: https://www.npmjs.com/package/uuid-js</p>\n                    <p>c. 如果前端使用的uuid不是长度为36的字符串，请告知，我们需要同步修改合约</p>\n                    <Divider>三、 结果</Divider>\n                    <p>Player: 玩家</p>\n                    <p>Time: 下注时间</p>\n                    <p>Payin: 投注总金额</p>\n                    <p>Payout: 中奖总金额</p>\n                    <p>Payed: 奖金是否已经支付</p>\n                    <p>Dice: 骰子点数</p>\n                    <p>Detail: 格式为 \"投注类型:该类型投注金额:该类型中奖金额\"</p>\n                </Drawer>\n            </div>\n        );\n    }\n}\n\nexport default SicBoInfoDrawer;\n","import React, { Component } from 'react';\nimport { Table } from 'antd';\nimport Eos from 'eosjs';\n\n// jungle net\n// const network = {\n//     blockchain: 'eos',\n//     protocol: 'http',\n//     host: 'junglehistory.cryptolions.io',  // filter-on = *\n//     port: 18888,\n//     chainId: '038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca'  // jungle net\n// }\n\n// kylin net\nconst network = {\n    blockchain: 'eos',\n    protocol: 'https',\n    host: 'api-kylin.eosasia.one',  // filter-on = *\n    port: '',\n    chainId: '5fff1dae8dc8e2fc4d5b23b2c7665c97f9e9d8edf2b6485a86ba311c25639191'  // kylin net\n}\nconst contract_account = 'trustbetgame';\n\nDate.prototype.Format = function (fmt) { //author: meizz\n    var o = {\n        \"M+\": this.getMonth() + 1, //月份\n        \"d+\": this.getDate(), //日\n        \"h+\": this.getHours(), //小时\n        \"m+\": this.getMinutes(), //分\n        \"s+\": this.getSeconds(), //秒\n        \"q+\": Math.floor((this.getMonth() + 3) / 3), //季度\n        \"S\": this.getMilliseconds() //毫秒\n    };\n    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n    for (var k in o)\n        if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\n    return fmt;\n}\n\nclass SicBoRecords extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            data_reveals: [],\n        }\n\n        this.eosjs = null;\n        this.fetchRecord = this.fetchRecord.bind(this);\n    }\n\n    fetchRecord = () => {\n        this.eosjs.getActions(contract_account, -1, -90).then(({ actions }) => {\n            let limit = 20;  // 从90个actions里面筛选出20个我们想要的\n            const _data_reveals = [];\n            for ( let i = actions.length - 1; i >= 0 && limit > 0; i-- ) {\n                if ( actions[i].action_trace\n                    && actions[i].action_trace.act\n                    && actions[i].action_trace.act.account === contract_account\n                    && actions[i].action_trace.act.name === 'result'\n                    && actions[i].action_trace.act.data\n                    && actions[i].action_trace.act.data.res\n                    && actions[i].action_trace.receipt\n                    && actions[i].action_trace.receipt.receiver === contract_account ) {\n\n                    _data_reveals.push({\n                        key: i,\n                        player: actions[i].action_trace.act.data.res.player,\n                        time: new Date(actions[i].action_trace.act.data.res.txtime*1000).Format('MM-dd hh:mm:ss'),\n                        payin: actions[i].action_trace.act.data.res.payin,\n                        payout: actions[i].action_trace.act.data.res.payout,\n                        payed: actions[i].action_trace.act.data.res.payed ? 'true' : 'false',\n                        dices: actions[i].action_trace.act.data.res.dice.dice1 + '、' + actions[i].action_trace.act.data.res.dice.dice2 + '、' + actions[i].action_trace.act.data.res.dice.dice3,\n                        detail: actions[i].action_trace.act.data.res.detail,\n                    });\n\n                    limit--;\n                }\n            }\n            this.setState({ data_reveals: _data_reveals });\n            setTimeout(this.fetchRecord, 1000);\n        }).catch(err => {\n            console.error( err );\n            setTimeout(this.fetchRecord, 2000);\n        });\n    }\n\n    componentDidMount = () => {\n        this.eosjs = Eos({\n            httpEndpoint: `${network.protocol}://${network.host}:${network.port}`,\n            chainId: network.chainId\n        });\n        this.fetchRecord();\n    }\n\n    render() {\n\n        const columns = [{\n            key: 'player',\n            dataIndex: 'player',\n            title: 'Player',\n            align: 'center',\n            width: '15%',\n        }, {\n            key: 'time',\n            dataIndex: 'time',\n            title: 'Time',\n            align: 'center',\n            width: '15',\n        }, {\n            key: 'payin',\n            dataIndex: 'payin',\n            title: 'Payin',\n            align: 'center',\n            width: '15%',\n        }, {\n            key: 'payout',\n            dataIndex: 'payout',\n            title: 'Payout',\n            align: 'center',\n            width: '15%',\n        }, {\n            key: 'payed',\n            dataIndex: 'payed',\n            title: 'Payed',\n            align: 'center',\n            width: '10%',\n        }, {\n            key: 'dices',\n            dataIndex: 'dices',\n            title: 'Dices',\n            align: 'center',\n            width: '10%',\n        }, {\n            key: 'detail',\n            dataIndex: 'detail',\n            title: 'Detail',\n            align: 'center',\n            width: '20%',\n        }];\n\n        return (\n            <div>\n                <Table\n                    loading={this.state.data_reveals.length <= 0 ? true : false}\n                    columns={columns}\n                    dataSource={this.state.data_reveals}\n                    pagination={false}\n                    style={{ width: \"1080px\", margin: \"auto\", backgroundColor: \"#efefef\" }}\n                />\n            </div>\n        );\n    }\n}\n\nexport default SicBoRecords;","import React, { Component } from 'react';\nimport Eos from 'eosjs';\nimport UUID from 'uuid-js';\nimport { Layout, Icon, Message, Input, InputNumber } from 'antd';\nimport SicBoInfoDrawer from './SicBoInfoDrawer';\nimport SicBoRecords from './SicBoRecords';\nimport './SicBo.css';\n\nconst { Header, Content } = Layout;\nconst Search = Input.Search;\n\n// jungle net\n// const network = {\n//     blockchain: 'eos',\n//     protocol: 'http',\n//     host: 'junglehistory.cryptolions.io',  // filter-on = *\n//     port: 18888,\n//     chainId: '038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca'  // jungle net\n// }\n\n// kylin net\nconst network = {\n    blockchain: 'eos',\n    protocol: 'https',\n    host: 'api-kylin.eosasia.one',  // filter-on = *\n    port: '',\n    chainId: '5fff1dae8dc8e2fc4d5b23b2c7665c97f9e9d8edf2b6485a86ba311c25639191'  // kylin net\n}\nconst contract_account = 'trustbetgame';  // 合约账号\n\nclass SicBo extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            player_asset: {             // 记录玩家各个token的资产\n                eos: '0.0000 EOS',\n                tbt: '0.0000 TBT',\n            },\n            dice_result: {\n                dice1: \"X\",\n                dice2: \"X\",\n                dice3: \"X\",\n            },\n            is_login: false,\n            player_account: 'Login',    // 保存玩家账号，未登录时显示'Login'\n            referrer: \"Null\",           // 推荐人\n            info_visible: false,\n        }\n\n        // var\n        this.bet_quantity = null;\n\n        // eosjs和scatter句柄，将在init()中初始化\n        this.eosjs = null;\n        this.scatter = null;\n\n        this.init = this.init.bind(this);\n        this.getReferrer = this.getReferrer.bind(this);\n        this.getPlayerAsset = this.getPlayerAsset.bind(this);\n        this.getSicBoResult = this.getSicBoResult.bind(this);\n    }\n\n    init = () => {\n        this.eosjs = Eos({\n            httpEndpoint: `${network.protocol}://${network.host}:${network.port}`,\n            chainId: network.chainId\n        });\n\n        document.addEventListener('scatterLoaded', scatterExtension => {\n            this.scatter = window.scatter;\n            window.scatter = null;\n\n            if (this.scatter && this.scatter.identity) {\n                const account = this.scatter.identity.accounts.find(account => account.blockchain === 'eos');\n                this.setState({ player_account: account.name });\n                this.setState({ is_login: true });\n\n                this.getPlayerAsset();\n            }\n        });\n    }\n\n    playerLoginLogout = () => {\n        if ( null === this.scatter ) {\n            Message.info('Must Install Scatter First');\n            return;\n        }\n\n        if ( this.state.is_login && this.scatter && this.scatter.identity ) {\n            // 进入这里是logout动作\n            this.scatter.forgetIdentity().then(() => {\n                this.setState({ is_login: false });\n                this.setState({ player_account: 'Login' });\n\n                // clean asset when logout\n                this.setState({\n                    player_asset: {\n                        eos: '0.0000 EOS',\n                    }\n                });\n            });\n        } else if ( !this.state.is_login && this.scatter && !this.scatter.identity ) {\n            // 进入这里是login动作\n            this.scatter.getIdentity({ accounts: [network] }).then(() => {\n                const account = this.scatter.identity.accounts.find(account => account.blockchain === 'eos');\n                this.setState({ player_account: account.name });\n                this.setState({ is_login: true });\n\n                this.getPlayerAsset();\n            });\n        }\n    }\n\n    // 获取玩家token资产，这里只获取了eos token资产\n    getPlayerAsset = () => {\n        if ( !this.state.is_login || 'Login' === this.state.player_account ) {\n            return;\n        }\n\n        Promise.all([\n            this.eosjs.getTableRows({\n                json: true,\n                code: 'eosio.token',\n                scope: this.state.player_account,  // 需要获取资产的账号\n                table: 'accounts'\n            }),\n            this.eosjs.getTableRows({\n                json: true,\n                code: 'trustbetteam',\n                scope: this.state.player_account,  // 需要获取资产的账号\n                table: 'accounts'\n            })\n        ]).then(([eosBalance, tbtBalance]) => {\n            if ( this.state.is_login && eosBalance.rows[0] ) {  // check if is valid now\n                let _player_asset = this.state.player_asset;\n                _player_asset.eos = eosBalance.rows[0].balance;\n                _player_asset.tbt = tbtBalance.rows[0].balance;\n                this.setState({ player_asset: _player_asset });\n            }\n        }).catch(e => {\n            console.error(e);\n        });\n    }\n\n    // 从浏览器地址获取推荐人\n    getReferrer = () => {\n        let reg = new RegExp(\"(^|&)\" + \"ref\" + \"=([^&]*)(&|$)\");\n        let ref = window.location.search.substr(1).match(reg);\n\n        if ( null !== ref ) {\n            this.setState({ referrer: unescape(ref[2]) });\n        }\n    }\n\n    // 下注总金额\n    inputQuantityChange = (value) => {\n        if ( isNaN(value) || value.length <= 0 ) {\n            console.log( \"null\" );\n        } else {\n            console.log( value );\n            this.bet_quantity = value;\n        }\n    }\n\n    // memo输入框\n    inputMemoChange = (value, event) => {\n        event.preventDefault();\n\n        if ( value.length <= 0 ) {\n            console.log(\"null\");\n        } else {\n            console.log( value );\n\n            // 只有登录了才转账\n            if ( this.state.is_login && 'Login' !== this.state.player_account ) {\n\n                // 组装uuid\n                let uuid4 = UUID.create().toString();\n                value = value + ';u:' + uuid4;\n\n                // 组装推荐人\n                if ( \"Null\" !== this.state.referrer ) {\n                    value = value + ';r:' + this.state.referrer;\n                }\n\n                const eos = this.scatter.eos(network, Eos, {});\n                eos.transfer({\n                    from: this.state.player_account,\n                    to: contract_account,\n                    quantity: Number(this.bet_quantity).toFixed(4) + ' EOS',\n                    memo: value\n                }).then(res => {\n                    this.getPlayerAsset();  // 更新玩家余额\n                    Message.success('SicBo Bet Success');\n                    this.getSicBoResult( uuid4 );  // 根据uuid匹配结果\n\n                    // 结果出来之前，先让骰子转动起来\n                    this.dice_shaking = setInterval(() => {\n                        this.setState({\n                            dice_result: {\n                                dice1: Math.floor(Math.random() * 5 + 1),\n                                dice2: Math.floor(Math.random() * 5 + 1),\n                                dice3: Math.floor(Math.random() * 5 + 1),\n                            }\n                        });\n                    }, 150);\n                }).catch(e => {\n                    console.error( e );\n                    Message.error(\"SicBo Bet Fail\");\n                    // Message.error(JSON.parse(e).error.details[0].message);\n                });\n            }\n        }\n    }\n\n    getSicBoResult = ( uuid4, action_seq = Math.pow(2, 52) ) => {\n        this.eosjs.getActions(this.state.player_account, -1, -20).then(({ actions }) => {\n            let cur_action_seq = action_seq;\n            let index = actions.length - 1;\n\n            for (; index >= 0; index--) {\n                let cur_action_seq = actions[index].account_action_seq;\n                if ( cur_action_seq <= action_seq ) {\n                    this.getSicBoResult( uuid4, cur_action_seq );\n                    break;\n                }\n\n                if ( actions[index].action_trace\n                    && actions[index].action_trace.act\n                    && actions[index].action_trace.act.account === contract_account\n                    && actions[index].action_trace.act.name === 'result'\n                    && actions[index].action_trace.act.data\n                    && actions[index].action_trace.act.data.res\n                    && actions[index].action_trace.act.data.res.uid === uuid4\n                    && actions[index].action_trace.act.data.res.player === this.state.player_account ) {\n                    // 进入这里，表名匹配到对应uuid的下注结果\n\n                    clearInterval( this.dice_shaking );  // 停止骰子转动\n\n                    const result = actions[index].action_trace.act.data.res;\n                    this.setState({\n                        dice_result: {\n                            dice1: result.dice.dice1,\n                            dice2: result.dice.dice2,\n                            dice3: result.dice.dice3,\n                        }\n                    });\n\n                    // 如果检测到payed不等于真，给一个玩家提示，该提示需要提供uuid\n                    if ( !actions[index].action_trace.act.data.res.payed ) {\n                        alert(\"sorry, we will payout to u later, remember uid: \" + uuid4);\n                    }\n\n                    if ( actions[index].action_trace.act.data.res.payout != '0.0000 EOS' ) {\n                        this.getPlayerAsset();  // 更新玩家余额\n                    }\n\n                    break;\n                }\n            }\n\n            if ( index < 0 ) {\n                this.getSicBoResult( uuid4, cur_action_seq );\n            }\n        });\n    }\n\n    showInfo = () => {\n        this.setState({ info_visible: true });\n    }\n    closeInfo = () => {\n        this.setState({ info_visible: false });\n    }\n\n    componentDidMount() {\n        this.init();\n        this.getReferrer();\n    }\n\n    render() {\n\n        return (\n            <div>\n                <Layout className='layout'>\n                    <Header>\n                        <a href='#' onClick={this.playerLoginLogout.bind(this)} className='login-logout'>\n                            {\n                                this.state.is_login === true ?\n                                <span><Icon type='user'/> {this.state.player_account}</span> :\n                                <span><Icon type='login'/> {this.state.player_account}</span>\n                            }\n                        </a>\n                        <span className='player-asset'>Asset: {this.state.player_asset.eos}</span>\n                        <span className='player-asset'>,&nbsp;&nbsp;&nbsp;&nbsp;{this.state.player_asset.tbt}</span>\n                        <span className='referrer'>&nbsp;&nbsp;&nbsp;&nbsp;Referrer: {this.state.referrer}</span>\n                        <a href=\"#\" className=\"info\" onClick={this.showInfo.bind(this)}>\n                            <Icon type='smile' /> Info\n                        </a>\n                    </Header>\n                    <Content>\n                        <div className='sicbo-result'>SicBo Result</div>\n                        <div className='dice-result'>\n                            <span>{this.state.dice_result.dice1}</span>\n                            <span> 、 {this.state.dice_result.dice2}</span>\n                            <span> 、 {this.state.dice_result.dice3}</span>\n                        </div>\n                        <div className=\"input-memo\">\n                            <InputNumber\n                                placeholder=\"total quantity\"\n                                step={0.5}\n                                style={{ width: '120px' }}\n                                onChange={this.inputQuantityChange.bind(this)}\n                            />\n                            <Search\n                                placeholder=\"key:quantity\"\n                                onSearch={this.inputMemoChange.bind(this)}\n                                enterButton=\"Let's Go\"\n                            />\n                            <span style={{ fontSize: \"0.5em\" }}> 注: 第一个框输入总金额，第二个框输入memo</span>\n                        </div>\n                        <SicBoRecords />\n                        <SicBoInfoDrawer\n                            info_visible={this.state.info_visible}\n                            handleCloseInfo={this.closeInfo.bind(this)}\n                        />\n                    </Content>\n                </Layout>\n            </div>\n        );\n    }\n}\n\nexport default SicBo;","import React, { Component } from 'react';\nimport SicBo from './SicBo/SicBo';\n\nclass App extends Component {\n  render() {\n    return (\n      <div>\n        <SicBo />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}